<!doctype html>
<html>
    
    <head>
        
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Fishing Game!</title>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        
        <style>
            html{
                height: 100%;
            }

            body {
                font-size: 15pt;
                font-family: Helvetica, Arial, sans-serif;
                background-image: linear-gradient(120DEG, #008BCF, #FFFFFF);
                background-repeat: no-repeat;
            }
            
            /* Change upgrade blocks when the user mouses over them */
            .upgrade-block:hover {
                color: #bb0505;  /* Bootstrap primary blue */
                cursor: pointer;  /* Make mouse into a finger */
            }
            
            .float-left {
                float: left;
            }
            
            .float-right {
                float: right;
            }
        
            .small-text {
                font-size: .85em;
            }
            
            #achievements {
                height: 250px;
            }
        
        </style>
    </head>
   
    <body>

        <div class="container">
            
            <!-- First row: title and main number -->
            <div class="row mt-5">
                <div class="col-lg-12">
                    <h1 class="float-left">Ultimate Fisherman!</h1>  
                    
                    <h1 id="number" class="float-right">0</h1>
                    
                    <div class="clear"></div> <!-- Required to reset float positioning -->
                </div>
            </div> <!-- /row -->
            
            
            <!-- Second row: buttons, resources, and upgrades -->
            <div class="row mt-5">
              
                <!-- Button and resource counts -->
                <div class="col-lg-7">
                      
                    <button class="btn btn-dark" id="click" onclick="changeNumber(clickIncrement)">
                        Catch Fish
                    </button>
                    
                    <div class="mt-5">
                        Number of Workers: <span id="num-finger-strength">1</span>
                    </div>

                    <div>
                        Automated Rods: <span id="num-autoclickers">0</span>
                    </div>

                    <div>
                        Fisherboats: <span id="num_fisherboats">0</span>
                    </div>

                    <div>
                        Automated Rods: <span id="num_automated_rods">0</span>
                    </div>
                    
                </div>
                
                
                <!-- Upgrades column -->
                <div class="col-lg-5">
                                      
                    <div class="upgrade-block" id="autocoder" onclick="buyAutoclicker()">
                        <span class="float-left">Hire Fisherman</span>
                        <span class="float-right" id="autoclicker-cost">10</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>

                    <div class="upgrade-block mt-3" id="trainFisherman" onclick="trainFisherman()">
                        <span class="float-left">Train Fisherman</span>
                        <span class="float-right" id="trainFishermanCost">50</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Doubles fish per second</span>
                    </div>
                    
                    <div class="upgrade-block mt-3" id="stronger-fingers" onclick="buyStrongerFingers()">
                        <span class="float-left">Set up Automated Line</span>
                        <span class="float-right" id="stronger-fingers-cost">100</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Double the strength of button clicks</span>
                    </div>

                    <div class="upgrade-block mt-3" id="fisherboat" onclick="buyFisherboat()">
                        <span class="float-left">Hire Fisherboat</span>
                        <span class="float-right" id="fisherboat_cost">1000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Adds 100 fish every 30 seconds</span>
                    </div>

                    <div class="upgrade-block mt-3" id="upgradeFisherboat" onclick="upgradeFisherboat()">
                        <span class="float-left">Upgrade Fisherboat</span>
                        <span class="float-right" id="upgradeFisherboat-cost">50000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>

                    <div class="upgrade-block mt-3" id="robotFish" onclick="buyRobotFish()">
                        <span class="float-left">Build Robot Fish</span>
                        <span class="float-right" id="robotFishCost">100000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Robot fish catches 500 fish every minute</span>
                    </div>

                    <div class="upgrade-block mt-3" id="updateRobotOS" onclick="upgradeRobotOS()">
                        <span class="float-left">Upgrade Robot OS</span>
                        <span class="float-right" id="upgradeRobotOS-cost">5000000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>
        
                </div>
            </div> <!-- /row -->
            
            
            <!-- Log and achievements -->
            <div class="row mt-5">
                <div class="col-lg-12 overflow-auto small-text" id="achievements">
                    This is your log of achievements. Make your mother proud!
                </div>          
            </div>  <!-- /row -->
            
        </div> <!-- /container -->
        
        
        <!-- JS, Popper.js, and jQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  
        <script>
        
            //*** THE NUMBER: make this go up ***//
            let number = 0;            
        
            //** Resources ***//
        
            // Increase the counter by this much on each button click
            let clickIncrement = 1;
            let strongerFingersCost = 100;
            
            // Automatically increment by this much every second
            let autoclickers = 0;            
            let autoclickerCost = 10;
            let autoclickerEfficiency = 1000;
            let autoclickerEfficiencyCost = 50;
            let interval_ID;
            let first = true;

            // Increase the counter by fisherboat amount every 30 seconds
            let fisherboat = 0;
            let fisherboatCost = 1000;
            let fisherboatEfficiency = 30000;
            let fisherboatEfficiencyCost = 50000;

            // Increase the counter by robot fish amount every minute
            let robotFish = 0;
            let robotFishCost = 100000;
            let robotFishEfficiency = 100000;
            let robotFishEfficiencyCost = 5000000;
            
            //*** Achievement object ***//
            achievements = {upAndRunning: false, industrialRevolution: false};
            
            
            //*** Change function ***//
            //
            // Called by any action that changes the number
            //
            // amount: the amount to increment or decrement
            function changeNumber(amount) {
                number += amount;
                
                // Update the number field    
                document.getElementById("number").innerHTML = number;
            }
            
            
            //*** Upgrade purchase functions ***//
            //
            // Each of these is triggered by clicking on its relevant
            // name in the Upgrades menu
            
            //*** Buy an autoclicker ***//
            function buyAutoclicker() {
                // Check that the number is big enough to purchase
                if (number < autoclickerCost) {
                    return;
                }

                if(first)
                {
                    first = false;

                    setFishermanTimer(autoclickerEfficiency);
                }
                
                // Reduce the number to pay for the upgrade
                changeNumber(-autoclickerCost);
                
                // Add one more autoclicker
                autoclickers += 1;
                document.getElementById("num-autoclickers").innerHTML = autoclickers;
                
                // Upgrade cost scales nonlinearly
                // There's nothing special about this function choice    
                autoclickerCost = Math.round(2 * Math.pow(autoclickerCost, 1.25));
                document.getElementById("autoclicker-cost").innerHTML = autoclickerCost;
            }

            // upgrades the fishermans efficiency
            function trainFisherman()
            {
                if(number < autoclickerEfficiencyCost)
                {
                    return;
                }

                changeNumber(-autoclickerEfficiencyCost);

                autoclickerEfficiency /= 2;

                clearInterval(interval_ID);

                setFishermanTimer(autoclickerEfficiency);
                //console.log(autoclickerEfficiency);
                autoclickerEfficiencyCost = Math.round(2 * Math.pow(autoclickerEfficiencyCost, 1.25));
                document.getElementById("trainFishermanCost").innerHTML = autoclickerEfficiencyCost;
            }
            
            //*** Increase finger strength ***//
            function buyStrongerFingers() {
                if (number < strongerFingersCost) {
                    return;
                }
                
                changeNumber(-strongerFingersCost);
                
                clickIncrement *= 2;
                document.getElementById("num-finger-strength").innerHTML = clickIncrement;
                
                strongerFingersCost = Math.round(2 * Math.pow(strongerFingersCost, 1.1));
                document.getElementById("stronger-fingers-cost").innerHTML = strongerFingersCost;
            }

            //*** Buy a fisher boat for huge fish catching abilities ***//
            function buyFisherboat()
            {
                if(number < fisherboatCost)
                {
                    return;
                }

                changeNumber(-fisherboatCost);

                fisherboat += 1;
                document.getElementById("num_fisherboats").innerHTML = fisherboat;

                fisherboatCost = Math.round(2 * Math.pow(fisherboatCost, 1.29));
                document.getElementById("fisherboat_cost").innerHTML = fisherboatCost;
            }

            function buyRobotFish()
            {
                if(number < robotFishCost)
                {
                    return;
                }

                changeNumber(-robotFishCost)

                robotFish += 1;
                document.getElementById("num_robot_fish").innerHTML = robotFish;

                robotFishCost = Math.round(2 * Math.pow(robotFishCost, 1.3));
                document.getElementById("robotFishCost").innerHTML = robotFishCost;
            }
            
            //*** Check achievements ***//
            //
            // Runs every cycle and posts any new achievements to the log
            function checkAchievements() {
                if (number >= 1 && !achievements.upAndRunning) {
                    achievements.upAndRunning = true;
                    
                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Up and running</b>: Click one time";
                }
                
                if (autoclickers >= 1 && !achievements.industrialRevolution) {
                    achievements.industrialRevolution = true;
                    
                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Industrial revolution</b>: Buy an autoclicker";
                }
            }
            
            
            //*** Main loop ***//
            //
            // Function runs every 1000 ms
            
            window.setInterval(function() {
                console.log("running");
                //changeNumber(autoclickers);
                checkAchievements();
            }, autoclickerEfficiency);

            function setFishermanTimer(time)
            {
                interval_ID = window.setInterval(function() {
                    changeNumber(autoclickers);
                }, time)  
            }

            window.setInterval(function(){
                console.log("running from the 30 seconds");
                changeNumber(fisherboat * 100);
            }, fisherboatEfficiency);

            window.setInterval(function(){
                console.log("running from the 1 minute");
                changeNumber(robotFish * 500);
            }, robotFishEfficiency)
            
        </script>
  
    </body>
    
</html>