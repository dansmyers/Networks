<!doctype html>
<html>
    
    <head>
        
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Fishing Game!</title>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        
        <style>
            html{
                height: 100%;
            }

            body {
                font-size: 15pt;
                font-family: Helvetica, Arial, sans-serif;
                background-image: linear-gradient(120DEG, #008BCF, #FFFFFF);
                background-repeat: no-repeat;
            }
            
            /* Change upgrade blocks when the user mouses over them */
            .upgrade-block:hover {
                color: #bb0505;  /* Bootstrap primary blue */
                cursor: pointer;  /* Make mouse into a finger */
            }
            
            .float-left {
                float: left;
            }
            
            .float-right {
                float: right;
            }
        
            .small-text {
                font-size: .85em;
            }
            
            #achievements {
                height: 250px;
            }
        
        </style>
    </head>
   
    <body id="body">

        <div class="container">
            
            <!-- First row: title and main number -->
            <div class="row mt-5">
                <div class="col-lg-12">
                    <h1 class="float-left">Ultimate Fisherman!</h1>  
                    
                    <h1 id="number" class="float-right">0</h1>
                    
                    <div class="clear"></div> <!-- Required to reset float positioning -->
                </div>
            </div> <!-- /row -->
            
            
            <!-- Second row: buttons, resources, and upgrades -->
            <div class="row mt-5">
              
                <!-- Button and resource counts -->
                <div class="col-lg-7">
                      
                    <button class="btn btn-dark" id="click" onclick="changeNumber(clickIncrement)">
                        Catch Fish
                    </button>

                    <button class="btn btn-dark" id="gamble" onclick="gambleFish()">
                        Gamble Fish
                    </button>
                    
                    <div class="mt-5">
                        Number of Lines: <span id="num-finger-strength">1</span>
                    </div>

                    <div>
                        Automated Rods: <span id="num-autoclickers">0</span>
                    </div>

                    <div>
                        Fisherboats: <span id="num_fisherboats">0</span>
                    </div>

                    <div>
                        Robot Fish: <span id="num_robot_fish">0</span>
                    </div>
                    
                </div>
                
                
                <!-- Upgrades column -->
                <div class="col-lg-5">
                                      
                    <div class="upgrade-block" id="autocoder" onclick="buyAutoclicker()">
                        <span class="float-left">Hire Fisherman</span>
                        <span class="float-right" id="autoclicker-cost">10</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>

                    <div class="upgrade-block mt-3" id="trainFisherman" style="display: none;" onclick="trainFisherman()">
                        <span class="float-left">Train Fisherman</span>
                        <span class="float-right" id="trainFishermanCost">50</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Doubles fish per second</span>
                    </div>
                    
                    <div class="upgrade-block mt-3" id="stronger-fingers" onclick="buyStrongerFingers()">
                        <span class="float-left">Set up Automated Line</span>
                        <span class="float-right" id="stronger-fingers-cost">100</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Double the strength of button clicks</span>
                    </div>

                    <div class="upgrade-block mt-3" id="fisherboat" style="display: none;" onclick="buyFisherboat()">
                        <span class="float-left">Hire Fisherboat</span>
                        <span class="float-right" id="fisherboat_cost">1000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Adds 100 fish every 30 seconds</span>
                    </div>

                    <div class="upgrade-block mt-3" id="upgradeFisherboat" style="display: none;" onclick="upgradeFisherboat()">
                        <span class="float-left">Upgrade Fisherboat</span>
                        <span class="float-right" id="upgradeFisherboat-cost">50000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>

                    <div class="upgrade-block mt-3" id="robotFish" style="display: none;" onclick="buyRobotFish()">
                        <span class="float-left">Build Robot Fish</span>
                        <span class="float-right" id="robotFishCost">100000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Robot fish catches 500 fish every minute</span>
                    </div>

                    <div class="upgrade-block mt-3" id="updateRobotOS" style="display: none;" onclick="upgradeRobotOS()">
                        <span class="float-left">Upgrade Robot OS</span>
                        <span class="float-right" id="upgradeRobotOS-cost">5000000</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>

                    <div class="upgrade-block mt-3" id="finalUpgrade" onclick="finalUpgrade()">
                        <span class="float-left">Retire From Fishing and Play Baccarat</span>
                        <span class="float-right" id="finalUpgradeCost">1</span>
                        
                        <div class="clear"></div> <!-- Required to reset float positioning -->
                        
                        <br/>
                        
                        <span class="small-text">Clicks once per second</span>
                    </div>
        
                </div>
            </div> <!-- /row -->
            
            
            <!-- Log and achievements -->
            <div class="row mt-5">
                <div class="col-lg-12 overflow-auto small-text" id="achievements">
                    This is your log of achievements. Make your mother proud!
                </div>          
            </div>  <!-- /row -->
            
        </div> <!-- /container -->
        
        
        <!-- JS, Popper.js, and jQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  
        <script>
        
            //*** THE NUMBER: make this go up ***//
            let number = 0;            
        
            //** Resources ***//
        
            // Increase the counter by this much on each button click
            let clickIncrement = 1;
            let strongerFingersCost = 100;
            
            // Automatically increment by this much every second
            let autoclickers = 0;            
            let autoclickerCost = 10;
            let autoclickerEfficiency = 1000;
            let autoclickerEfficiencyCost = 50;
            let interval_ID;
            let first = true;

            // Increase the counter by fisherboat amount every 30 seconds
            let fisherboat = 0;
            let fisherboatCost = 1000;
            let fisherboatEfficiency = 30000;
            let fisherboatEfficiencyCost = 50000;

            // Increase the counter by robot fish amount every minute
            let robotFish = 0;
            let robotFishCost = 100000;
            let robotFishEfficiency = 100000;
            let robotFishEfficiencyCost = 5000000;

            // final upgrade information
            let finalupgradeCost = 1;
            
            //*** Achievement object ***//
            achievements = {upAndRunning: false, industrialRevolution: false, fisherboat: false, fisherboatUpgrade: false, robotFish: false, upgradeRobotFishOS: false};
            
            
            //*** Change function ***//
            //
            // Called by any action that changes the number
            //
            // amount: the amount to increment or decrement
            function changeNumber(amount) {
                number += amount;
                
                // Update the number field    
                document.getElementById("number").innerHTML = number;
            }
            
            let importantButton = document.getElementById("click");

            importantButton.addEventListener("click", function(){
                let trainFisherman = document.getElementById("trainFisherman");
                let fisherboat = document.getElementById("fisherboat");
                let upgradeFisherboat = document.getElementById("upgradeFisherboat");
                let robotFish = document.getElementById("robotFish");
                let robotOS = document.getElementById("updateRobotOS");

                if(number >= 100)
                {
                    showElement(trainFisherman);
                }

                if(number >= 500)
                {
                    showElement(fisherboat);
                }
                
                if(number >= 1000)
                {
                    showElement(upgradeFisherboat);
                }

                if(number >= 10000)
                {
                    showElement(robotFish);
                }

                if(number >= 100000)
                {
                    showElement(robotOS);
                }
            });


            function gambleFish()
            {                
                let bet = prompt("Street artist wants to play dice\nIf you guess right make 10x your fish\nGuess lower and make 2x your fish\n Guess higher and lose your fish\nenter fish to bet: ", 0);
                if(number < bet)
                {
                    alert("you do not have that many fish!");
                    return;
                }
                let guess = prompt("Enter your guess between 1 and 6", 1);
                let correctNumber = Math.floor(Math.random() * Math.floor(6)) + 1;

                if(guess < correctNumber)
                {
                    alert("You guessed " + guess + "the correct number was " + correctNumber + " you won " + bet * 2 + " fish!");
                    changeNumber(2 * bet);
                }
                else if(guess == correctNumber)
                {
                    alert("You guessed " + guess + "the correct number was " + correctNumber + " you won " + bet * 10 + " fish!");
                    changeNumber(10 * bet)
                }
                else
                {
                    alert("You guessed " + guess + " the correct number was " + correctNumber + " you lost " + bet + " fish!");
                    changeNumber(-bet);
                }
            }
            
            //*** Upgrade purchase functions ***//
            //
            // Each of these is triggered by clicking on its relevant
            // name in the Upgrades menu
            
            //*** Buy an autoclicker ***//
            function buyAutoclicker() {
                // Check that the number is big enough to purchase
                if (number < autoclickerCost) {
                    return;
                }

                if(first)
                {
                    first = false;

                    setFishermanTimer(autoclickerEfficiency);
                }
                
                // Reduce the number to pay for the upgrade
                changeNumber(-autoclickerCost);
                
                // Add one more autoclicker
                autoclickers += 1;
                document.getElementById("num-autoclickers").innerHTML = autoclickers;
                
                // Upgrade cost scales nonlinearly
                // There's nothing special about this function choice    
                autoclickerCost = Math.round(2 * Math.pow(autoclickerCost, 1.25));
                document.getElementById("autoclicker-cost").innerHTML = autoclickerCost;
            }

            // upgrades the fishermans efficiency
            function trainFisherman()
            {
                if(number < autoclickerEfficiencyCost)
                {
                    return;
                }

                changeNumber(-autoclickerEfficiencyCost);

                autoclickerEfficiency /= 2;

                clearInterval(interval_ID);

                setFishermanTimer(autoclickerEfficiency);
                //console.log(autoclickerEfficiency);
                autoclickerEfficiencyCost = Math.round(2 * Math.pow(autoclickerEfficiencyCost, 1.25));
                document.getElementById("trainFishermanCost").innerHTML = autoclickerEfficiencyCost;
            }
            
            //*** Increase finger strength ***//
            function buyStrongerFingers() {
                if (number < strongerFingersCost) {
                    return;
                }
                
                changeNumber(-strongerFingersCost);
                
                clickIncrement *= 2;
                document.getElementById("num-finger-strength").innerHTML = clickIncrement;
                
                strongerFingersCost = Math.round(2 * Math.pow(strongerFingersCost, 1.1));
                document.getElementById("stronger-fingers-cost").innerHTML = strongerFingersCost;
            }

            //*** Buy a fisher boat for huge fish catching abilities ***//
            function buyFisherboat()
            {
                if(number < fisherboatCost)
                {
                    return;
                }

                changeNumber(-fisherboatCost);

                fisherboat += 1;
                document.getElementById("num_fisherboats").innerHTML = fisherboat;

                fisherboatCost = Math.round(2 * Math.pow(fisherboatCost, 1.29));
                document.getElementById("fisherboat_cost").innerHTML = fisherboatCost;
            }

            function buyRobotFish()
            {
                if(number < robotFishCost)
                {
                    return;
                }

                changeNumber(-robotFishCost)

                robotFish += 1;
                document.getElementById("num_robot_fish").innerHTML = robotFish;

                robotFishCost = Math.round(2 * Math.pow(robotFishCost, 1.3));
                document.getElementById("robotFishCost").innerHTML = robotFishCost;
            }
            
            function finalUpgrade()
            {
                if(number < finalupgradeCost)
                {
                    return;
                }
                let body = document.getElementById("body");
                body.innerHTML = "";

                let p = document.createElement("p");
                let img = document.createElement("img");

                img.src = "james.jpg";

                p.innerHTML = "Greetings. I am Bond, James Bond from the MI6. While you thought you were catching fish in reality you were providing invaluable intellengence on the doings of the evil corporation Chicken Bones©. They have been trying to steal all of the fish in the world so consumers can only eat pultury. Thankfully your fish shall keep them from capturing all of the seafood for their nafarious purposes. Good luck and have a great winter break!";

                body.append(img);
                body.append(p);
            }

            //*** Check achievements ***//
            //
            // Runs every cycle and posts any new achievements to the log
            function checkAchievements() {
                if (number >= 1 && !achievements.upAndRunning) {
                    achievements.upAndRunning = true;
                    
                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Up and running</b>: Click one time";
                }
                
                if (autoclickers >= 1 && !achievements.industrialRevolution) {
                    achievements.industrialRevolution = true;
                    
                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Industrial revolution</b>: Buy an autoclicker";
                }

                if(fisherboat >= 1 && !achievements.fisherboat)
                {
                    achievements.fisherboat = true;

                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Fisherboat</b>: Buy a fisherboat";
                }
                
                if(fisherboatEfficiency < 30000 && !achievements.fisherboatUpgrade)
                {
                    achievements.fisherboatUpgrade = true;

                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Upgraded Fisherboat</b>: Buy a fisherboat upgrade";
                }

                if(robotFish >= 1 && !achievements.robotFish)
                {
                    achievements.robotFish = true;

                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Killer Waters:</b>: Buy a robot fish";
                }

                if(robotFishEfficiency < 100000 && !achievements.upgradeRobotFishOS)
                {
                    achievements.upgradeRobotFishOS = true;

                    document.getElementById("achievements").innerHTML +=
                        "<br/> <b>Super Fish</b>: Upgrade Robot Fish OS"
                }
            }

            // Hide an element from the player
            function hideElement(element)
            {
                element.sytle.display = "none";
            }

            // Reveal a hidden element to the player
            function showElement(element)
            {
                element.style.display = "block";
            }
            
            //*** Main loop ***//
            //
            // Function runs every 1000 ms
            
            window.setInterval(function() {
                console.log("running");
                //changeNumber(autoclickers);
                checkAchievements();
            }, autoclickerEfficiency);

            function setFishermanTimer(time)
            {
                interval_ID = window.setInterval(function() {
                    changeNumber(autoclickers);
                }, time)  
            }

            window.setInterval(function(){
                console.log("running from the 30 seconds");
                changeNumber(fisherboat * 100);
            }, fisherboatEfficiency);

            window.setInterval(function(){
                console.log("running from the 1 minute");
                changeNumber(robotFish * 500);
            }, robotFishEfficiency)
            
        </script>
  
    </body>
    
</html>